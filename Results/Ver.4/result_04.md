# 学习机制与认知辅助

## Ln 对话窗口学习引导机制

为防止用户在深度学习过程中陷入无止境的细节钻研而偏离主线，系统在每个对话窗口（Ln）的AI回答下方，都提供一套结构化的“三向导航”引导机制。该机制将用户的“被动式提问”转化为“主动式路径选择”，将AI从单纯的答案提供者升级为学习路径导航员。

### **三向引导语义模型**

在AI每次回答的末尾，系统会动态生成三个具有明确语义目标的引导选项，分别对应知识的拓宽、凿深与收敛。

-   **拓扑引导 (Horizontal Link)**
    -   **功能定位**：在当前认知层级内进行横向知识关联，寻找当前概念的同级或对照组。
    -   **交互效果**：用户点击后，内容在当前卡片内追加，不创建新的对话层级。
    -   **语义示例**：在解释完“ROIC”后，系统可能建议：“通常将ROIC与ROE结合分析能发现财报修饰，需要对比一下吗？”

-   **穿透引导 (Vertical Dive)**
    -   **功能定位**：对当前概念的底层逻辑或组成部分进行深度钻研，拆解其构成要素。
    -   **交互效果**：点击后，系统平滑生成一个新的子级卡片（`L(n+1)`），开启新的对话层级。
    -   **语义示例**：在解释完“ROIC”后，系统可能建议：“ROIC的波动核心在于‘投入资本(IC)’的计算细节，需要拆解它吗？”

-   **收敛引导 (Convergence Exit)**
    -   **功能定位**：将当前节点的学习成果与上层或主干目标进行关联，完成局部认知闭环并回归主线。
    -   **交互效果**：点击后，视觉焦点回归到父级卡片（`L(n-1)`）。
    -   **语义示例**：在解释完“ROIC”后，系统可能建议：“细节已清晰，回到‘公司基本面分析’环节，看它如何影响定价？”

### **交互布局与工程化**

为实现上述引导机制，UI布局和后端逻辑将进行以下工程化设计：

-   **“三路出口”交互布局**
    -   **UI呈现**：在每张对话卡片的底部，设置三个固定的、由分割线与正文区分的引导按钮。
    -   **按钮配置**：
        -   **左侧 (平⾏扩展)**：图标为 `↔`，用于触发拓扑引导。
        -   **中间 (深层穿透)**：图标为 `↘`，用于触发穿透引导。
        -   **右侧 (逻辑收敛)**：图标为 `↖`，用于触发收敛引导。
    -   **动效**：当用户滚动到卡片底部时，这三栏建议以淡入（Fade-in）动画出现。

-   **键盘驱动交互**
    -   为保证沉浸式体验，系统支持纯键盘操作。
    -   快捷键映射：`Alt + 1`、`Alt + 2`、`Alt + 3` 分别对应左、中、右三个引导按钮，按下时按钮有明显的回弹动效。

-   **与知识地图的状态同步**
    -   用户的引导选择将实时反映在全局知识地图上。
    -   **平⾏扩展**：在知识地图的当前节点下追加一个同级“补充点”。
    -   **深层穿透**：从当前节点向右延伸出一条新的逻辑分支。
    -   **逻辑收敛**：当前路径分支在地图上变暗，主干路径则重新高亮。

-   **异常场景处理**
    -   **逻辑末端处理**：当某个知识点已是底层公理，无法继续深入时，“深层穿透”按钮将自动转变为“寻找实际案例”或直接隐藏。
    -   **长对话悬浮**：在同个窗口进行多轮对话时，三栏引导按钮将始终悬浮在当前对话视窗的底部，而非仅在卡片内容的最末端。