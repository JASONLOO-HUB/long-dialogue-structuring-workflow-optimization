好的，作为一名技术文档架构师，我将依据您提供的JSON大纲和完整的对话记录，生成一份精确、结构化的技术文档。

**核心原则：** 只记录最终确定的方案与决策，忽略所有讨论过程与被否决的提案。

---

# UI/UX核心框架与迭代

本文档详细定义了MindWeave学习空间的UI/UX核心框架、交互范式以及应对信息过载的解决方案。该设计旨在为用户提供一个沉浸式、非线性的深度学习环境。

## UI/UX设计：核心布局与交互概览

### **MindWeave学习空间UI/UX详细设计**

MindWeave的核心设计理念是“无限追问系统”，旨在通过空间化的交互界面，将知识的深度探索过程显性化，解决传统线性对话流中的认知混乱问题。

#### **核心布局：三栏动态IDE架构**

系统采用类似集成开发环境（IDE）的多栏弹性布局，物理上隔离不同层级的认知任务，确保用户在深度钻研时不会迷失主线。

*   **左侧：知识地图 (The Knowledge Map)**
    *   **形态**：垂直的树状结构。
    *   **功能**：实时展示教学大纲（L1层级），作为目录和快速跳转的锚点。当前学习节点会高亮，已完成的节点则会置灰。

*   **中间：主场画布 (The Active Stage)**
    *   **形态**：宽屏的文档流。
    *   **功能**：作为教学主干（L1）的核心区域，用于呈现主要的教学内容，如文本、代码块和数学公式。

*   **右侧：钻研抽屉 (The Dive-in Drawer)**
    *   **形态**：可随时收起的侧边栏。
    *   **功能**：深度钻研（L2）和碎片补充（L3）的对话发生区域。当用户针对主画布中的某个概念提问时，该抽屉会自动滑出。

#### **核心交互：智能路由输入框**

产品采用位于底部中央的单入口输入框，它不仅是文本输入区域，更是一个“意图指挥官”，能通过预判和反馈简化用户的操作。

*   **路由预判与视觉反馈**：
    *   输入框上方会通过微型标签（Tag）和光标颜色实时显示AI对用户意图的预判。
        *   **L1 主干**：蓝色光标，标签为`[L1 主干]`。
        *   **L2 深入**：紫色光标，标签为`[L2 深入]`。
        *   **L3 补充**：灰色光标，标签为`[L3 补充]`。

*   **手动纠偏机制**：
    *   若AI预判错误，用户可通过按下`Tab`键快速循环切换路由目标，确保操作的掌控感。

#### **跨层级视觉关联**

为了在物理界面上建立不同层级间的逻辑联系，防止认知断层，系统采用了以下视觉关联机制。

*   **锚点链接 (Anchors)**：当一个深度钻研（L2）中的问题被解决后，主画布（L1）中对应的触发文本会自动生成一个下划线或侧边图标。用户点击该图标，即可快速唤出当初的钻研对话记录。
*   **上下文“呼吸”特效**：当用户在右侧L2窗口提问时，左侧L1对应的内容会产生轻微的“发光”效果，时刻提醒用户当前的提问背景。

#### **快捷操作逻辑**

为打造沉浸式体验，产品设计以快捷键优先，减少对鼠标的依赖。

*   `Cmd + K`: 唤起或聚焦输入框。
*   `Cmd + J`: 收起或展开右侧的“钻研抽屉”。
*   `Cmd + [ / ]`: 在左侧知识地图的章节间快速跳转。
*   `Enter`: 发送消息。
*   `Shift + Enter`: 在输入框内换行。

#### **信息过载挑战与解决方案**

为避免多窗口内容同时存在导致视觉过载，系统内置了自动化信息管理策略。

*   **自动收纳**：当产生新的深度对话时，旧的L2对话会自动折叠为仅显示标题和核心结论的“摘要卡片”。
*   **视觉聚焦**：只有用户当前交互的层级保持100%的不透明度，非活跃层级的内容会自动降低至70%不透明度，帮助用户集中注意力。

---

## 用户UI/UX反馈与功能细化迭代

基于初始框架，根据用户对深度学习场景的进一步需求，对核心模块进行了功能细化与交互升级。

#### **弹性布局与窗口管理策略**

*   主场画布（L1）默认占据大部分屏幕，侧边栏默认只显示一个窗口。
*   当用户需要进行更深层次的追问（唤醒L3）时，系统可自动隐藏或最小化L1窗口，将视觉空间完全让渡给L2和L3的深度讨论。

#### **左侧知识地图功能扩展**

知识地图被设计为具备两种信息密度的动态模块。

*   **常驻态（极简引导）**：默认以一条极窄的垂直线形态存在，仅通过节点位置提示用户在整体大纲中的坐标。
*   **放大态（复盘全景）**：点击或悬停后，展开为一个完整的思维导图，用于复盘。
    *   **节点定位逻辑**：点击导图中的任一节点，优先弹出该节点内容的“总结文档”（AI自动生成的摘要）。摘要卡片底部提供一个“查看原始对话”的链接，在用户二次点击后才加载完整的对话上下文，以此平衡体验和Token消耗。

#### **智能路由输入框交互逻辑**

*   **划选触发机制**：用户可以直接用鼠标框选回答中的某个概念（如“ROIC”），系统会在选区旁弹出一个包含多个联想问题的微型悬浮条（如“解释ROIC”、“ROIC如何计算”），实现非打字式的快速追问。
*   **层级唤醒逻辑**：
    *   **L2 (Dive-in)**: 当用户提问与L1内容有明显从属或关联关系时触发。
    *   **L3 (Tangent)**: 当用户提问与L1、L2内容无明显相关性时触发。

---

## UI/UX深度拆解：认知坐标系与交互升级

本阶段的设计将产品从一个信息展示工具，升级为一个辅助用户构建“认知坐标系”的深度学习环境。

#### **弹性布局：从“文档流”到“手风琴架构”**

引入“响应式侧边堆叠 (Stacked Drawers)”概念，使窗口布局能根据用户的注意力焦点动态调整。

*   **默认态**：L1占据100%宽度。
*   **一级展开 (L1+L2)**：L1缩放至60%，右侧滑出L2占40%。
*   **极限展开 (L2+L3)**：L1物理折叠成一根仅显示章节标题的“进度立柱”，将屏幕空间完全交给L2和L3。

#### **左侧地图：从“极简引导”到“复盘全景”**

*   **常驻态 (The Spine)**：宽度控制在40px-60px，形态为一条发光的垂直线，节点为小圆点。当L2开启时，主线上会生出一个微型“分叉”，提示用户偏离主线的深度。
*   **放大态 (The Knowledge Atlas)**：展开为思维导图后，节点定位逻辑被固化为：
    1.  **优先定位总结**：点击节点，弹出AI生成的摘要卡片。
    2.  **二次跳转上下文**：仅在用户点击卡片底部的链接时，才加载原始对话记录。

#### **交互升级：划选触发**

将“划选触发”机制具体化，以减少打字带来的心智中断。

*   **交互路径**：用户划选文本 → 选区下方弹出悬浮条（包含3个AI联想问题+1个自定义输入框）→ 点击联想问题 → 右侧L2窗口平滑滑出并自动带入问题。

#### **智能路由的“模糊地带”处理**

为增强产品“帮助用户保持专注”的定位，对L3的唤醒逻辑进行优化。

*   **主动路由**：对于明显无关的问题（如“今天天气”），系统静默路由至L3。
*   **被动提示**：对于“似是而非”的问题，路由框会闪烁并提示：“这似乎是一个偏离主线的话题，已为您开启临时窗口（L3）以保护学习主线”，以此来教育用户。

#### **视觉关联的物理化：连接线**

当右侧L2窗口打开时，系统会在L1的“触发点”与L2的“对话框边缘”之间，渲染一条半透明的贝塞尔曲线。这种视觉上的“脐带”连接，能让用户在复杂界面中清晰地感知当前的逻辑从属关系。

---

## UI/UX范式变革：无限追问系统

为满足用户对知识本质进行无尽探索的需求，产品UI/UX范式从固定的三层结构演变为支持无限层级追问的动态系统。

#### **无限追问系统UI/UX设计**

##### **布局进化：流式横向画布**

*   **卡片层级化**：每个对话窗口（L1, L2, ..., Ln）都是一个独立的“知识卡片”。
*   **横向位移逻辑**：当从Ln唤起Ln+1时，新卡片在右侧生成，所有父级卡片（L1至Ln）则像层叠的信封一样向左堆叠，并降低不透明度，形成一条清晰的“因果路径”。

##### **知识地图：空间导航站**

在无限分裂模式下，知识地图升级为核心的全局导航系统。

*   **常驻态 (The Minimap)**：位于屏幕右上角的游戏式缩略地图，实时显示完整的树状分支，并用红点标出用户当前所在的Ln节点。
*   **全景态 (The Atlas)**：点击可放大为全屏思维导图，其核心功能是**交互式回溯**。
    *   **节点即入口**：点击导图中的任意节点，主画布会平滑滚动到对应的对话卡片位置。
    *   **路径高亮**：选中任一深度节点，地图会自动高亮从L1到该节点的完整逻辑链条，其余无关分支则会置灰。

##### **碎片补充窗口：卫星模式**

用于处理逻辑断裂的“补充提问”窗口（原L3），采用完全不同的交互模式以作区分。

*   **形态**：一个悬浮在屏幕边缘（如左下角）的“卫星窗口”，不参与主画布的横向卡片流堆叠。
*   **逻辑**：它是一个无记忆隔离的临时工具，用户可在任何深度随时唤起，而不影响主线逻辑。

##### **自动化分支管理与单入口识别**

*   **智能收缩**：当探索层级过深时，系统会自动将非活跃的早期父级卡片（如L(n-2)及以前）折叠成仅显示核心关键词的竖状条（Spine）。
*   **单入口识别**：AI路由器会自动判断用户提问是否与当前Ln内容相关。若相关，则在右侧生成Ln+1卡片；若不相关，则自动将问题重定向至“卫星窗口”。

##### **总结文档的动态生成**

为确保地图的复习效率，系统采用步进式总结机制。

*   **知识元数据**：每一级对话结束时，后台都会利用小模型生成一个包含`{Title, Summary, Keywords, ParentID}`的知识元数据对象。
*   **地图呈现**：地图节点默认显示`Title`，用户长按或悬停时显示`Summary`，确保用户能通过地图快速回顾整个探索路径。